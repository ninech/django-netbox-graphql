sudo: required
language: python

services:
  - docker

install:
  - docker-compose build

script:
  - docker-compose run netbox ./manage.py test

after_script:
  - docker-compose down
  
deploy:
  provider: pypi
  user: "${PYPI_USERNAME}"
  password: "${PYPI_PASSWORD}"
  on:
    tags: true
